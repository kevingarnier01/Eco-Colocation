
@{
	ViewBag.operation = @ViewData["operation"];
	ViewBag.Title = "AddUpd_ModalPeopleSearch";
}
<div class="underModal col-sm-12 col-xs-12">
	<div id="addUpd_ModalPeopleSearch" class="reelModal">
		@if (!User.Identity.IsAuthenticated)
		{
			if (ViewBag.operation == "Inscription")
			{
				<h2 class="title centerText">Publier vos intérêts de recherche en vous inscrivant</h2>
			}
			else if (ViewBag.operation == "Update")
			{
				<h2 class="title centerText">Modifier mon annonce de recherche d'éco-colocation</h2>
				<div class="flex">
					<a href="@Url.Action("", "", null)" class="btnGreen flex childFlex" id="btnDisableProfilInterested">Désactiver mon intérêt de recherche</a>
				</div>
			}
			else
			{
				<h2 class="title centerText">Ajouter mon annonce de recherche d'éco-colocation</h2>
			}
		}
		else
		{
			if (ViewBag.operation == "Update")
			{
				<h2 class="title centerText">Modifier mon annonce de recherche d'éco-colocation</h2>
				<div class="flex">
					<a href="@Url.Action("", "", null)" class="btnGreen flex childFlex" id="btnDisableProfilInterested">Désactiver mon intérêt de recherche</a>
				</div>
			}
			else
			{
				<h2 class="title centerText">Ajouter mon annonce de recherche d'éco-colocation</h2>
			}
		}
		<div class="divEncadrer-mcar">
			<div class="encadrer-mcar col-sm-11 col-xs-12">
				<div class="col-sm-4 divLeftSideEncadrer-mcar divImgLogo-mcar">
					<div class="divImgLogoHorizontal-mcar">
						<div class="divImgLogoVertical-mcar">
							<i class="fas fa-search icon-ca"></i>
						</div>
					</div>
				</div>
				<div class="col-sm-8 divRightSideEncadrer-mcar">
					<div class="col-sm-12">
						<div id="divBudgMax-mcar" class="col-sm-4">
							<label class="lbl-mcar">Budget maximum&nbsp;*</label>
						</div>
						<div id="divInputBudgMax" class="col-sm-7">
							<input type="number" class="input-mcar" placeholder="Entrez le buget max">
							<div class="lineinput-mcar"></div>
							<div id="euroSignBudgetMax-mcar">€</div>
						</div>
					</div>
					<div class="col-sm-12">
						<div id="div10-2-adresseLog-ca" style="position:relative" class="fontFamilyNote">
							<div class="divResearchLocation flex">
								<div class="flex">
									<div class="childFlex">
										<select id="typeResearchSct-car" class="form-control typeResearchSct" onchange="typeOfResearchLocation(this, '#inputSearchPlace-car')">
											<option value="communes" selected="">Communes</option>
											<option value="departements">Départements</option>
											<option value="regions">Régions</option>
											<option value="france">Toute la France</option>
										</select>
									</div>
								</div>
								<input id="inputSearchPlace-car" oninput="addr_searchCity(this);checkToDisableLstOrNot(this, '#typeResearchSct-car')" type="text"
									   class="form-control inputSearchPlace" placeholder="Veuillez indiquer la commune concernée&nbsp;*">
							</div>
							<input id="inputSearchPlace-mpcHidden" name="inputSearchPlace-mpcHidden" type="hidden">
							<div class="listAutoCompleteToModal"></div>
							<div id="placeSaved-car" class="placeSaved">
								<div id="place-car" class="place">
								</div>
							</div>
							<div id="div10-3-adresseLog-ca" class="flex col-sm-12">
								<div id="div10-4-adresseLog-ca" class="col-sm-2"></div>
								<i class="fas fa-info" id="iconPlace-ca"></i>
								<p class="col-sm-12" style="margin: auto;">Il vous est possible d'indiquer plusieurs lieux concernant votre projet de création d'éco-colocation</p>
							</div>
						</div>
					</div>
					<div class="col-sm-12">
						<p id="txtAlertEmail-car">Voulez-vous être alerté par mail des nouvelles annonces qui respectent vos critères de recherche ?</p>
						<div class="flex">
							<div class="childFlex">
								<p class="onoff">
									<input type="checkbox" value="1" id="email-car">
									<label for="email-car"></label>
								</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="descTextAnnonceLocationDataPersonnal" class="flex col-sm-12 textInfoAdresse-ca">
			<div id="div10-4-adresseLog-ca" class="col-sm-2"></div>
			<i class="fas fa-info" id="iconPlace-ca"></i>
			<p class="fontFamilyNote col-sm-12" style="margin: auto;">
				Toutes ces données ne seront pas visibles publiquement, seulement votre prénom, votre âge et l'activité apparaîtra sur votre profil.
			</p>
		</div>
		@if (!User.Identity.IsAuthenticated)
		{
			@Html.Partial("~/Views/Account/PersonalDataForm.cshtml")
		}
		else
		{
			@Html.Partial("~/Views/Account/PersonalDataForm.cshtml")
			<div id="divMethodToBeContact-car"></div>
		}
		<div class="divEncadrer-mcar" id="divDesciptionInfo-mcar">
			<div class="encadrer-mcar col-sm-11 col-xs-12">
				<div class="col-sm-4 col-xs-12 divImgLogo-mcar">
					<div class="divImgLogoHorizontal-mcar">
						<div class="divImgLogoVertical-mcar">
							<i class="fas fa-pencil-alt icon-ca"></i>
						</div>
					</div>
				</div>
				<div class="col-sm-8 col-xs-12" id="divGlobalPresent-mcar">
					<div class="col-sm-12" id="divDesciptionInfo2-mcar">
						<label class="lbl-mcar">Présentation de votre personnalité&nbsp;*</label>
						<textarea class="txtareaDesc-mcar input-mcar" id="txtareaPersoP-mcar" placeholder="Présentez-vous en quelque ligne..."></textarea>
					</div>
					<div class="col-sm-12" id="divCritereRecherche-mcar">
						<label class="lbl-mcar" id="lblCritereRecherche-mcar">Information sur vos critères de recherche&nbsp;*</label>
						<textarea class="txtareaDesc-mcar input-mcar" placeholder="Présenter le type d'éco-colocation recherchée..."></textarea>
						<textarea class="txtareaDesc-mcar input-mcar" placeholder="Présenter les pratiques écologiques envisagées..."></textarea>
					</div>
				</div>
			</div>
		</div>
		<div class="divEncadrer-mcar">
			<div class="encadrer-mcar col-sm-11 col-xs-12">
				<div class="col-sm-4 divLeftSideEncadrer-mcar divImgLogo-mcar">
					<div class="divImgLogoHorizontal-mcar">
						<div class="divImgLogoVertical-mcar">
							<i class="fas fa-camera-retro icon-ca"></i>
						</div>
					</div>
				</div>
				<div class="col-sm-8 divRightSideEncadrer-mcar">
					<div id="divGlobalMsgPhoto-mcar">
						<i class="fas fa-info" id="iconMsgPhoto-mcar"></i>
						<div>
							<p>Les profils accompagnées d'une photo sont 7 fois plus consultés que les autres.</p>
						</div>
					</div>
					<div id="divGlobalBtnUplFile-mcar">
						<label id="btnUplFile-mcar" for="file-upload">Ajouter une photo de vous</label>
						<input id="file-upload" type="file" name="filePicture-mcar" onchange="showfile('divResultFilesUpl-mcar')">
					</div>
				</div>
			</div>
		</div>
		<div id="divGlobalResultFilesUpl-mcar">
			<div class="childFlex">
				<ul id="divResultFilesUpl-mcar" class='all-slides'>
					@*Html généré par javascript dans la fonction showMultiplesFilesUpload()*@
				</ul>
			</div>
			@*<img src="" id="resultImgUpl-mcar">
				<i id="icondeletePicture-ayer" class="fas fa-times-circle" onclick="removeUploadPicture_ayer()"></i>
				<i class="fas fa-check-circle" id="checkPicture-ayer"></i>*@
		</div>
		@if (!User.Identity.IsAuthenticated)
		{
			if (ViewBag.operation == "Update")
			{
				<div class="flex">
					<a href="@Url.Action("EcoRoommateHomeView", "EcoRoommateHome", null)" class="btnGreen flex childFlex">Mettre à jour</a>
				</div>
			}
			else if (ViewBag.operation == "Inscription")
			{
				@Html.Partial("~/Views/Account/PasswordDiv.cshtml")
				<div class="flex" id="divInscriptionButtons-mcar">
					<div class="childFlex btnGreen">Valider</div>
				</div>
			}
			else
			{
				<div id="divInscriptionButtons-mcar">
					@Html.Partial("~/Views/Account/ButtonsCreateAccount.cshtml")
				</div>
			}
		}
		else
		{
			if (ViewBag.operation == "Update")
			{
				<div class="flex">
					<a href="@Url.Action("EcoRoommateHomeView", "EcoRoommateHome", null)" class="btnGreen flex childFlex">Mettre à jour</a>
				</div>
			}
			else
			{
				<div class="flex" id="divInscriptionButtons-mcar">
					<div class="childFlex btnGreen">Ajouter mon annonce</div>
				</div>
			}
		}
	</div>
	<div class="divCloseModal">
		<a href="#close-modal" rel="modal:close" onclick="autoCompletePrepend()"><i class="fas fa-times close-modal"></i></a>
	</div>
</div>

<script type="text/javascript">
	initSlidepicture();
	showDivCritereRecherche();

	$('#descTextAnnonceLocationDataPersonnal').detach().prependTo('#extraElement-pdf');

	$(document).on('input', '#emailInp-pdf', function (e) {
		copyEmailToUserAuthentification("#emailInp-pdf", "#emailInpt-pd")
		copyEmailToUserAuthentification("#emailInp-pdf", "#emailInp-bca")
	});

	if ($("#divMethodToBeContact-car").length != 0) {
		$("#divPersonnaliteInfo-mcar").remove();
	}

	var operation = "@ViewData["operation"]";
	if (operation == "Update") {
		window.history.replaceState('data to be passed', 'Title of the page',
				'/Modal/AddUpd_ModalPeopleSearchUpdate/?idModal=' + @ViewData["idModal"] + "&targetCity=" + "@ViewData["targetCity"]");
	} else {
		window.history.replaceState('data to be passed', 'Title of the page',
			"/Modal/AddUpd_ModalPeopleSearch?urlCurrentPage=" + $('#urlCurrentPage').val());
	}
</script>